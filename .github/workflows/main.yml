name: Dummy CI/CD Pipeline

on:
  push:
    branches:
      - main
  workflow_dispatch:

env:
  SERVICE_NAME: dummy-service

jobs:
  dummy-build:
    runs-on: ubuntu-latest
    name: Dummy Build Stage
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Build Step (Dummy)
        run: |
          echo "Building dummy project..."
          sleep 3

      - name: Upload Dummy Build Artifact
        uses: actions/upload-artifact@v4
        with:
          name: dummy-artifact
          path: dummy-output/
          retention-days: 1

  dummy-analysis:
    needs: dummy-build
    runs-on: ubuntu-latest
    name: Dummy Analysis Stage
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Download Dummy Artifact
        uses: actions/download-artifact@v4
        with:
          name: dummy-artifact
          path: dummy-output/

      - name: Run Analysis (Dummy)
        run: |
          echo "Running dummy static analysis..."
          sleep 2

  dummy-predeploy:
    needs: dummy-analysis
    runs-on: ubuntu-latest
    name: Dummy Pre-Deploy
    steps:
      - name: Prepare Configs (Dummy)
        run: |
          echo "Preparing dummy deployment configs..."
          sleep 2

      - name: Upload Dummy Config
        uses: actions/upload-artifact@v4
        with:
          name: dummy-deploy-config
          path: config/dummy-config.properties
          retention-days: 1

  dummy-deploy:
    needs: dummy-predeploy
    runs-on: ubuntu-latest
    name: Dummy Deploy Stage
    steps:
      - name: Download Config (Dummy)
        uses: actions/download-artifact@v4
        with:
          name: dummy-deploy-config
          path: config/

      - name: Deploy to Environment (Dummy)
        run: |
          echo "Deploying dummy service to production environment..."
          sleep 3

      - name: ðŸŽ‰ Deployment Done
        run: |
          echo "âœ… Dummy deployment completed!"
          echo "Build URL: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}"
